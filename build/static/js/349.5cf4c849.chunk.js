"use strict";(self.webpackChunkbrm_tracker=self.webpackChunkbrm_tracker||[]).push([[349],{726:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var r=a(861),n=a(885),i=a(757),l=a.n(i),s=a(791),c=a(319),o=a(816),u=(a(127),a(871)),d=a(551),p=a(806),v=a(856),h=a(533),m=a(943),x=a(836),f=a(281),T=a(657),_=a(184);function b(){var e=(0,s.useContext)(x.V),t=(0,u.UO)().tid,a=(0,u.s0)(),i=(0,s.useState)(),b=(0,n.Z)(i,2),k=b[0],w=b[1];(0,s.useEffect)((function(){window.scrollTo(0,0)}),[]);var S=(0,m.x)(),C=S.isLoading,E=S.error,j=S.sendRequest,V=S.clearError,N=(0,h.c)({title:{value:"",isValid:!1},deposit:{value:"",isValid:!1},withdrawals:{value:"",isValid:!1},currentBalance:{value:"",isValid:!1}},!1),O=(0,n.Z)(N,3),P=O[0],y=O[1],B=O[2];function D(){a("/".concat(e.userId,"/brm-tracker"),{replace:!0})}function R(){return(R=(0,r.Z)(l().mark((function a(r){return l().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),a.prev=1,a.next=4,j("".concat({NODE_ENV:"production",PUBLIC_URL:"/brm-tracker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL,"/trackers/").concat(t),"PATCH",JSON.stringify({title:P.inputs.title.value,deposit:P.inputs.deposit.value,withdrawals:P.inputs.withdrawals.value,currentBalance:P.inputs.currentBalance.value}),{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.token)});case 4:D(),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(1);case 9:case"end":return a.stop()}}),a,null,[[1,7]])})))).apply(this,arguments)}return(0,s.useEffect)((function(){var e=function(){var e=(0,r.Z)(l().mark((function e(){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j("".concat({NODE_ENV:"production",PUBLIC_URL:"/brm-tracker",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BACKEND_URL,"/trackers/").concat(t));case 3:a=e.sent,console.log("responseData",a),w(a.tracker),B({title:{value:a.tracker.title,isValid:!0},deposit:{value:a.tracker.desposit,isValid:!0},withdrawals:{value:a.tracker.withdrawals,isValid:!0},currentBalance:{value:a.tracker.currentBalance,isValid:!0}},!0),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[j,B,t]),console.log("loadedTracker",k),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(c.Z,{}),(0,_.jsxs)("section",{className:"new-tracker-container",children:[(0,_.jsx)("h1",{className:"page-header",children:"Update Tracker"}),(0,_.jsx)(f.Z,{error:E,onClear:V}),!C&&k&&(0,_.jsxs)("form",{className:"form",onSubmit:function(e){return R.apply(this,arguments)},children:[C&&(0,_.jsx)(T.Z,{asOverlay:!0}),(0,_.jsx)("div",{className:"form-controller",children:(0,_.jsx)(d.Z,{id:"title",element:"input",type:"text",label:"Title",errorText:"Please enter a valid title",validators:[(0,p.hg)()],onInput:y,initialValue:k.title,initialValid:!0})}),(0,_.jsx)("div",{className:"form-controller",children:(0,_.jsx)(d.Z,{id:"deposit",element:"input",type:"number",label:"Deposit",errorText:"Please enter a valid number",validators:[(0,p.hg)()],onInput:y,initialValue:k.deposit,initialValid:!0})}),(0,_.jsx)("div",{className:"form-controller",children:(0,_.jsx)(d.Z,{id:"withdrawals",element:"input",type:"number",label:"Withdrawal",errorText:"Please enter a valid number",validators:[(0,p.hg)()],onInput:y,initialValue:k.withdrawals,initialValid:!0})}),(0,_.jsx)("div",{className:"form-controller",children:(0,_.jsx)(d.Z,{id:"currentBalance",element:"input",type:"number",label:"Current Balance",errorText:"Please enter a valid number",validators:[(0,p.hg)()],onInput:y,initialValue:k.currentBalance,initialValid:!0})}),(0,_.jsxs)("div",{style:{display:"flex",gap:"25px"},children:[(0,_.jsx)(v.Z,{type:"submit",disabled:!P.isValid,children:"Submit"}),(0,_.jsx)("button",{onClick:D,className:"button",children:"Cancel"})]})]})]}),(0,_.jsx)(o.Z,{})]})}},127:function(){}}]);
//# sourceMappingURL=349.5cf4c849.chunk.js.map